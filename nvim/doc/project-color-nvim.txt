*project-color-nvim.txt*  Neovim plugin for persisting themes

Author:  rektide
License: MIT
Version: 0.1.0
GitHub:  https://github.com/rektide/project-color

==============================================================================
INTRODUCTION                                      *project-color-nvim-intro*

project-color-nvim is a Neovim plugin that automatically persists your current
theme to a `.env.editor` file. This allows you to maintain consistent color
schemes across different projects and sessions.

The plugin works by:
- Loading theme from `.env.editor` on Neovim startup
- Automatically updating the file when you change your theme
- Supporting both general (EDITOR_COLOR) and editor-specific (NVIM_COLOR) theme
  variables

==============================================================================
INSTALLATION                                    *project-color-nvim-installation*

Using lazy.nvim: >

    {
      'rektide/project-color',
      config = function()
        require('project-color-nvim').setup()
      end
    }
<

Using packer.nvim: >

    use {
      'rektide/project-color',
      config = function()
        require('project-color-nvim').setup()
      end
    }
<

==============================================================================
USAGE                                            *project-color-nvim-usage*

Setup: >

    require('project-color-nvim').setup()
<

After setup, the plugin will automatically:
1. Load theme from `.env.editor` on startup
2. Watch for theme changes and update the file

Changing themes: >

    :colorscheme tokyonight
<

The plugin will automatically persist this change to `.env.editor`.

==============================================================================
CONFIGURATION                                *project-color-nvim-configuration*

setup({options})                                    *project-color-nvim-setup()*

Configure the plugin. Called automatically by your plugin manager.

Parameters: ~
    {options} (table, optional) Configuration options

Options: ~
    enabled   (boolean) Enable/disable the plugin. Default: true
    autoload  (boolean) Automatically load theme on startup. Default: true
    persist   (boolean) Persist theme changes to env file. Default: true
    env_file  (string)  Name of the env file to read/write. Default: ".env.editor"
    augroup  (string)  Name of the augroup for autocmds. Default: "ProjectColorNvim"

When `enabled` is false, the plugin does nothing. When `autoload` is
false, the plugin watches for changes but doesn't load a theme on startup.
When `persist` is false, the plugin loads theme but doesn't write changes
to the env file.

Example: >

    require('project-color-nvim').setup({
      enabled = true,
      autoload = true,
      persist = true,
      env_file = '.env.editor',
    })
<

==============================================================================
ENVIRONMENT VARIABLES                        *project-color-nvim-environment*

The plugin checks for theme variables in the following priority order:

1. System environment `NVIM_COLOR` (highest priority)
2. System environment `EDITOR_COLOR`
3. File `.env.editor` `NVIM_COLOR`
4. File `.env.editor` `EDITOR_COLOR`
5. Default theme

System environment variables override file-based configuration.

 NVIM_COLOR (system and file)                         *NVIM_COLOR*
     Editor-specific theme override. In system environment, this takes
     precedence over file-based configuration. In `.env.editor` file, this
     variable will be loaded and updated by the plugin.

 EDITOR_COLOR (system and file)                       *EDITOR_COLOR*
     General theme variable. In system environment, used when NVIM_COLOR
     is not set. In `.env.editor` file, used when NVIM_COLOR is not present.

Load Priority (system > file): ~
    NVIM_COLOR (system) → EDITOR_COLOR (system) → NVIM_COLOR (file) →
    EDITOR_COLOR (file) → default theme

Write Behavior: ~
    When you change your theme, the plugin updates only one variable in the
    `.env.editor` file:
    - If NVIM_COLOR exists in the file, it updates that variable
    - Otherwise, it updates EDITOR_COLOR

NVIM_COLOR_PERSIST                                   *NVIM_COLOR_PERSIST*
    Plugin control flag. Set to "0" or "false" to disable the plugin globally.
    This overrides the `enabled` configuration option.

Example using system environment variable for theme: >
    export NVIM_COLOR=tokyonight
    nvim
<

Example `.env.editor` with general theme: >
    EDITOR_COLOR=tokyonight
<

Example with editor-specific override in file: >
    NVIM_COLOR=tokyonight
    EDITOR_COLOR=default
<


==============================================================================
ARCHITECTURE                                  *project-color-nvim-architecture*

The plugin is organized into feature-based modules:

lua/project-color-nvim/
├── init.lua       - Main plugin entry point and orchestration
├── config.lua     - Configuration management and defaults
├── env.lua        - Env file parsing and writing operations
├── theme.lua      - Theme retrieval and colorscheme loading
└── autocmds.lua   - Autocmd setup and event handling

Module Responsibilities: ~

config.lua ~
    Defines default plugin configuration
    Handles setup() - merges user options with defaults
    Provides configuration validation

env.lua ~
    Parses dotenv-format files (KEY=value)
    Writes updated variables to env files
    Handles file I/O operations for `.env.editor`

theme.lua ~
    Retrieves current theme name from Neovim
    Loads a specified colorscheme
    Handles theme loading errors gracefully

autocmds.lua ~
    Sets up ColorScheme autocmd listener
    Creates plugin's augroup
    Coordinates theme persistence on theme changes

==============================================================================
HEALTH CHECK                                   *project-color-nvim-health*

Run health checks to verify plugin status: >

    :checkhealth project-color-nvim
<

Health checks verify:
- Plugin loaded status
- Configuration validity
- Current theme status
- Env file existence and content
- Autocmd registration

==============================================================================
ABOUT                                            *project-color-nvim-about*

project-color-nvim is an open-source project. Contributions, issues, and feature
requests are welcome at:
    https://github.com/rektide/project-color

==============================================================================
vim:tw=78:ts=8:ft=help:norl:
